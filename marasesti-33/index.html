<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vila de inchiriat pe Bd. Marasesti nr. 33</title>
    <style>
        /* --- General Styles --- */
        body {
            font-family: sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
            text-align: center;
        }

        h1 { color: #333; margin-bottom: 20px; }
        
        /* --- Description Section --- */
        .descriere {
            max-width: 960px;
            text-align: left;
            margin: auto;
            padding-bottom: 30px;
        }
        
        .descriere .status {
            color: red;
            font-size: 2rem;
            display: block;
            margin-bottom: 10px;
            text-align: center;
        }

        .descriere .contact-phone {
            font-size: 3rem;
            color: crimson;
            display: block;
            margin-top: 20px;
            text-align: center;
        }

        /* --- Gallery Grid Layout --- */
        .gallery-container {
            display: flex;
            flex-wrap: wrap; 
            gap: 15px; 
            max-width: 1200px; 
            margin: 0 auto; 
            justify-content: center; 
        }

        .gallery-item {
            flex: 1 1 250px; 
            max-width: 350px; 
            overflow: hidden; 
            border: 1px solid #ddd;
            border-radius: 5px; 
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .gallery-item img {
            width: 100%; 
            height: 350px; 
            object-fit: cover; 
            display: block; 
            transition: transform 0.3s ease; 
            cursor: pointer;
        }

        .gallery-item img:hover {
            transform: scale(1.03); 
        }

        /* --- Modal/Lightbox Styles --- */
        .modal {
            display: none; 
            position: fixed; 
            z-index: 1000; 
            left: 0; top: 0;
            width: 100%; height: 100%;
            overflow: hidden; 
            background-color: rgba(0,0,0,0.9); 
            user-select: none;
        }

        .modal-content {
            display: block;
            margin: 5% auto; 
            width: 90%; 
            max-width: 1000px; 
            max-height: 90%;
            object-fit: contain; 
            transition: opacity 0.3s ease-in-out; 
        }

        /* Close and Navigation Buttons Base Style */
        .close, .prev, .next {
            position: absolute;
            color: #f1f1f1;
            font-size: 40px;
            font-weight: bold;
            transition: 0.3s;
            cursor: pointer;
            z-index: 1001; 
            opacity: 0.8;
        }

        .close {
            top: 15px;
            right: 35px;
        }

        /* Navigation Arrows Positioning */
        .prev, .next {
            top: 50%;
            padding: 16px;
            transform: translateY(-50%);
        }

        .prev { left: 15px; }
        .next { right: 15px; }

        /* Hover Effect */
        .close:hover,
        .prev:hover, 
        .next:hover,
        .close:focus {
            opacity: 1;
            background-color: rgba(0,0,0,0.4);
        }
    </style>
</head>
<body>

    <h1>Vila de inchiriat pt Bd. Marasesti nr. 33</h1>
    <div class="descriere">
        <span class="status"> WORK IN PROGRESS </span>
        <p>
            Vila pe Bulevardul Marasesti, vis-a-vis de Engie, renovata complet (toate instalatiile, izolatie vata minerala, centrala noua, parchet, gresie, pereti rigips etc.) in urma cu 2 ani cu materiale de buna calitate de catre o firma specializata.
            <br><br>
            Suprafata utila aproximativ 160 mp + terasa + curte de ~90mp.
            <br><br>
            Elemente de arhitectura autentice, lumina naturala.
            <br><br>
            3 bai (2 mari + 1 de serviciu), camere mari, spatioase (se pot adauga pereti despartitori din rigips/sticla).
            <br><br>
            Ideala pentru afacere cu 10-15 angajati.
            <br><br>
            <b>2700 Euro, avans 2 luni</b>
        </p>
        <span class="contact-phone">Telefon 0773.953.118 </span>
        <br><br>
    </div>

    <div class="gallery-container" id="galleryContainer">
        </div>

    <div id="imageModal" class="modal">
        <span class="close">&times;</span>
        <span class="prev">&#10094;</span> 
        <span class="next">&#10095;</span> 
        <img class="modal-content" id="modalImage">
    </div>

<script>
    const imageFiles = [
        "m33-exterior-strada.jpg",
        "m33-curte-interior.jpg",
        "m33-sufr-lumina.jpg",
        "m33-sufr-wide-lumina.jpg",
        "m33-sufr-wide.jpg",
        "m33-sufr-bec.jpeg",
        "m33-sufr-dark.jpeg",
        "m33-sala-mese.jpeg",
        "m33-bucatarie-goala.jpeg",
        "m33-baie-jos.jpeg",
        "m33-scara-de-sus.jpg",
        "m33-scara-wide.jpeg",    
        "m33-etaj-wide.jpg",
        "m33-etaj.jpeg",
        "m33-etaj-lung.jpeg",
        "m33-etaj-wide-invers.jpg",
        "m33-camera-etaj.jpeg",
        "m33-etaj-birou.jpeg",
        "m33-baie-etaj.jpeg"
    ];
    const IMAGE_PATH_PREFIX = 'images/';
    
    // Element selections
    const galleryContainer = document.getElementById('galleryContainer');
    const modal = document.getElementById('imageModal');
    const modalImg = document.getElementById('modalImage');
    const closeBtn = document.querySelector('.close');
    const prevBtn = document.querySelector('.prev');
    const nextBtn = document.querySelector('.next');
    
    let currentImageIndex;
    let imageSources = [];

    // --- 1. Initial Image Rendering (Populates HTML) ---
    function renderGallery() {
        let htmlContent = '';
        imageFiles.forEach((filename, index) => {
            const src = IMAGE_PATH_PREFIX + filename;
            imageSources.push(src); // Populate the navigation array
            
            // Generate the HTML for the thumbnail
            htmlContent += `
                <div class="gallery-item">
                    <img src="${src}" data-full-src="${src}" alt="Vila Marasesti Image ${index + 1}" data-index="${index}">
                </div>
            `;
        });
        galleryContainer.innerHTML = htmlContent;
    }

    // Call the render function to build the gallery
    renderGallery();

    // --- 2. Modal Logic Setup (Must run AFTER renderGallery) ---
    const renderedImages = document.querySelectorAll('.gallery-item img');

    function showImage(index) {
        // Logic to loop around (wraps from last to first and vice-versa)
        if (index < 0) {
            currentImageIndex = imageSources.length - 1;
        } else if (index >= imageSources.length) {
            currentImageIndex = 0;
        } else {
            currentImageIndex = index;
        }
        modalImg.src = imageSources[currentImageIndex];
    }

    function openModal(index) {
        modal.style.display = "block";
        showImage(index);
    }

    function closeModal() {
        modal.style.display = "none";
    }

    // Add click listener to every thumbnail
    renderedImages.forEach(img => {
        img.addEventListener('click', (e) => {
            // Get the image index from the data-index attribute
            const index = parseInt(e.target.getAttribute('data-index'));
            openModal(index);
        });
    });

    // --- 3. Event Handlers (Navigation and Close) ---
    closeBtn.onclick = closeModal;
    prevBtn.onclick = () => showImage(currentImageIndex - 1);
    nextBtn.onclick = () => showImage(currentImageIndex + 1);

    // Click outside image to close modal
    window.onclick = function(event) {
        if (event.target == modal) {
            closeModal();
        }
    }

    // 4. Keyboard Navigation (Arrows and Escape)
    document.addEventListener('keydown', function(e) {
        if (modal.style.display === "block") {
            if (e.key === "ArrowLeft") {
                showImage(currentImageIndex - 1);
            } else if (e.key === "ArrowRight") {
                showImage(currentImageIndex + 1);
            } else if (e.key === "Escape") {
                closeModal();
            }
        }
    });

    // 5. Touch/Swipe Navigation
    let touchstartX = 0;
    let touchendX = 0;
    const SWIPE_THRESHOLD = 50; 

    modalImg.addEventListener('touchstart', e => {
        touchstartX = e.changedTouches[0].screenX;
    });

    modalImg.addEventListener('touchend', e => {
        touchendX = e.changedTouches[0].screenX;
        handleGesture();
    });

    // Prevents accidental scrolling when swiping horizontally
    modalImg.addEventListener('touchmove', e => {
        const deltaX = Math.abs(e.changedTouches[0].screenX - touchstartX);
        if (deltaX > 5) {
             e.preventDefault(); 
        }
    }, { passive: false });


    function handleGesture() {
        const distance = touchendX - touchstartX;

        if (distance > SWIPE_THRESHOLD) {
            showImage(currentImageIndex - 1); // Right swipe -> Previous image
        } else if (distance < -SWIPE_THRESHOLD) {
            showImage(currentImageIndex + 1); // Left swipe -> Next image
        }
        touchstartX = 0;
        touchendX = 0;
    }
</script>

</body>
</html>